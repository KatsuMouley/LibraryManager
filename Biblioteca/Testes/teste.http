@host = http://localhost:5257

# ==========================================================
# ||                 VARIﾃ〃EIS DE TOKEN                   ||
# || IMPORTANTE: Apﾃｳs fazer login com cada tipo de        ||
# || usuﾃ｡rio no seu banco de dados, cole o token JWT      ||
# || correspondente aqui.                                 ||
# ==========================================================
@token_comum = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiY29tbW9tdXNlckBleGFtcGxlLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6InVzdWFyaW8iLCJleHAiOjE3NTA5NDg4MjN9.TKiH-bNXrlBaSv3brKThJLx0dP89X1YRROKzoEEsl2c
@token_admin = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoibm92by5hZG1pbkBleGFtcGxlLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMiIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6ImFkbWluaXN0cmFkb3IiLCJleHAiOjE3NTA5NDg4NDV9.hjPNdQn5WOknSVnxEZdEVQHfEebPZUG2vUWtvo4zqfE


###########################################################
### 沐 ROTAS Pﾃ咤LICAS (nﾃ｣o requerem autenticaﾃｧﾃ｣o)
###########################################################

### 笨 Cadastrar usuﾃ｡rio COMUM (Permissao: 0)
POST {{host}}/api/Usuario/cadastrar
Content-Type: application/json

{
  "email": "commomuser@example.com",
  "senha": "123456",
  "permissao": 0
}

### 笨 Cadastrar usuﾃ｡rio ADMIN (Permissao: 1)
POST {{host}}/api/Usuario/cadastrar
Content-Type: application/json

{
  "email": "novo.admin@example.com",
  "senha": "123456",
  "permissao": 1
}

### 笨 Login (Usuﾃ｡rio COMUM)
POST {{host}}/api/Usuario/login
Content-Type: application/json

{
  "email": "commomuser@example.com",
  "senha": "123456"
}

### 笨 Login (Usuﾃ｡rio ADMIN)
POST {{host}}/api/Usuario/login
Content-Type: application/json

{
  "email": "novo.admin@example.com",
  "senha": "123456"
}

### 笨 Listar todos os livros
GET {{host}}/api/Livros/listar

### 笨 Buscar livro por ID
# ATENﾃﾃグ: Use um ID de livro existente (ex: 1)
GET {{host}}/api/Livros/1

### 笨 Buscar livros por autor
# ATENﾃﾃグ: Use um ID de autor existente (ex: 1)
GET {{host}}/api/Livros/autor/1

### 笨 Listar todos os autores
GET {{host}}/api/Autor/listar

### 笨 Buscar autor por ID
# ATENﾃﾃグ: Use um ID de autor existente (ex: 1)
GET {{host}}/api/Autor/1


###########################################################
### 沐 ROTAS PROTEGIDAS (requerem autenticaﾃｧﾃ｣o)
###########################################################

### 沐 Listar todos os usuﾃ｡rios (somente ADMIN)
GET {{host}}/api/Usuario/listar
Authorization: Bearer {{token_admin}}

###

### 沐 Cadastrar novo autor (somente ADMIN)
POST {{host}}/api/Autor
Authorization: Bearer {{token_admin}}
Content-Type: application/json

{
  "nome": "George Orwell",
  "nacionalidade": "Britﾃ｢nico"
}

### 沐 Atualizar autor (somente ADMIN)
# ATENﾃﾃグ: Use um ID de autor existente no seu DB
PUT {{host}}/api/Autor/alterar/1
Authorization: Bearer {{token_admin}}
Content-Type: application/json

{
  "id": 1,
  "nome": "Eric Arthur Blair",
  "nacionalidade": "Britﾃ｢nico"
}

### 沐 Deletar autor (somente ADMIN)
# ATENﾃﾃグ: Use um ID de autor existente E SEM LIVROS ASSOCIADOS no seu DB
DELETE {{host}}/api/Autor/deletar/2
Authorization: Bearer {{token_admin}}

###

### 沐 Cadastrar novo livro (somente ADMIN)
# ATENﾃﾃグ: autorId deve ser um ID de autor existente no seu DB
POST {{host}}/api/Livros
Authorization: Bearer {{token_admin}}
Content-Type: application/json

{
  "titulo": "A Revoluﾃｧﾃ｣o dos Bichos",
  "anoPublicacao": 1945,
  "autorId": 1,
  "capaUrl": "https://m.media-amazon.com/images/I/41D0bB5sUWL._SY445_SX342_QL70_FMwebp_.jpg"
}

### 沐 Atualizar livro (somente ADMIN)
# ATENﾃﾃグ: Use um ID de livro e um ID de autor existentes no seu DB
PUT {{host}}/api/Livros/1
Authorization: Bearer {{token_admin}}
Content-Type: application/json

{
  "id": 1,
  "titulo": "1984 (Ediﾃｧﾃ｣o Revisada)",
  "anoPublicacao": 1950,
  "autorId": 1,
  "capaUrl": "https://m.media-amazon.com/images/I/51p4yV8U+ML._SL500_.jpg"
}

### 沐 Deletar livro (somente ADMIN)
# ATENﾃﾃグ: Use um ID de livro existente E Nﾃグ EMPRESTADO no seu DB
DELETE {{host}}/api/Livros/2
Authorization: Bearer {{token_admin}}

###

### 沐 (USUﾃヽIO) Fazer um emprﾃｩstimo para si mesmo
# Esta rota usa o token do usuﾃ｡rio logado para definir o UsuarioId.
# ATENﾃﾃグ: livroId deve ser um ID de livro existente E DISPONﾃ昂EL no seu DB.
POST {{host}}/api/Emprestimos/emprestar
Authorization: Bearer {{token_comum}}
Content-Type: application/json

{
  "livroId": 1
}

### 沐 (ADMIN) Fazer um emprﾃｩstimo para qualquer usuﾃ｡rio
# Esta rota permite que um admin defina para qual usuﾃ｡rio o livro serﾃ｡ emprestado.
# ATENﾃﾃグ: livroId e usuarioId devem existir E o livro deve estar disponﾃｭvel.
POST {{host}}/api/Emprestimos/emprestar-como-admin
Authorization: Bearer {{token_admin}}
Content-Type: application/json

{
  "livroId": 1,
  "usuarioId": 15
}

### 沐 Devolver livro (qualquer um dos tokens vﾃ｡lidos)
# A lﾃｳgica no backend verifica se o usuﾃ｡rio ﾃｩ o dono do emprﾃｩstimo ou um admin.
# ATENﾃﾃグ: Use um ID de emprﾃｩstimo ATIVO (nﾃ｣o devolvido) existente no seu DB.
PUT {{host}}/api/Emprestimos/devolver/1
Authorization: Bearer {{token_comum}}

###

### 沐 Consultar MEUS emprﾃｩstimos (usuﾃ｡rio logado)
GET {{host}}/api/Emprestimos/meus-emprestimos
Authorization: Bearer {{token_comum}}

###

### 沐 Listar TODOS os emprﾃｩstimos (somente ADMIN)
GET {{host}}/api/Emprestimos/listar
Authorization: Bearer {{token_admin}}